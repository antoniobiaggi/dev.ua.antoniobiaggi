/**
* Prestashop Addons | Module by: <App1Pro>
*
* @author    Chuyen Nguyen [App1Pro].
* @copyright Chuyenim@gmail.com
* @license   http://app1pro.com/license.txt
*/

$.fn.relatedProductPro=function(){var t=$(this);t.find(".related_product tbody").sortable(),t.find(".related_product tbody").disableSelection();var e=$("#row_template"),i=function(t,i){var d=e.clone().removeAttr("id");d.find("td").eq(1).text(t),d.find("td").eq(2).text(i),d.find('input[type="hidden"]').val(t),d.appendTo(".related_product tbody"),d.find(".delete_product_related").click(function(){$(this).closest("tr").remove()})};t.find("#product_autocomplete_input").keyup(function(){var e=$.trim($(this).val());e.length?$.ajax({url:"ajax_products_list.php",data:{q:e,limit:20,excludeIds:id_product},success:function(e){t.find(".ajax_result").html("").hide();for(var d=e.split("\n"),n=0;n<d.length-1;n++){var a=d[n].split("|"),r=$("<a>").attr("rel",a[1]).attr("href","javascript:void(0);");r.html('<img src="../img/admin/add.gif"> <span>'+a[0]+"</span></a>"),r.appendTo($(".ajax_result").show()),r.click(function(t){t.preventDefault(),i($(this).attr("rel"),$(this).find("span").text())})}}}):t.find(".ajax_result").html("").hide()}),t.find("#product_autocomplete_input").blur(function(){$(this).parents().find("#product_autocomplete_input").val(""),setTimeout(function(){t.find(".ajax_result").hide()},200)}),t.find(".delete_product_related").click(function(t){t.preventDefault(),t.stopPropagation(),$(this).closest("tr").remove()})};